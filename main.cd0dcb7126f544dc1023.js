(()=>{"use strict";var e={9580:(e,t,s)=>{s.r(t)},9281:(e,t,s)=>{s.r(t)},270:(e,t,s)=>{s.r(t)},4558:(e,t,s)=>{s.r(t)},7579:(e,t,s)=>{s.r(t)},5879:(e,t,s)=>{s.r(t)},976:(e,t,s)=>{s.r(t)},3517:(e,t,s)=>{s.r(t)},5731:(e,t,s)=>{s.r(t)},9644:(e,t,s)=>{s.r(t)},9398:(e,t,s)=>{s.r(t)},9019:(e,t,s)=>{s.r(t)},3159:(e,t,s)=>{s.r(t)},9087:(e,t,s)=>{s.r(t)},9867:(e,t,s)=>{s.r(t)},5528:(e,t,s)=>{s.r(t)},8231:(e,t,s)=>{s.r(t)},8109:(e,t,s)=>{s.r(t)},506:(e,t,s)=>{s.r(t)},6977:(e,t,s)=>{s.r(t)},1695:(e,t,s)=>{s.r(t)},8227:(e,t,s)=>{s.r(t)},2654:(e,t,s)=>{s.r(t)},436:(e,t,s)=>{s.r(t)},8387:(e,t,s)=>{s.r(t)},6752:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const a=s(9516),o=s(5159),r=s(689),l=s(4977),d=s(3826),p=s(1875),u=i(s(1863));t.App=class{constructor(e){this.rootElement=e,this.settingsPage=new d.Settings,this.aboutPage=new a.AboutPage,this.scorePage=new o.BestScore([]),this.header=new l.Header(u.default),this.iDataBase=new p.DataBase,this.gamePage=new r.Game(this.settingsPage.cardsNum),this.rootElement.append(this.header.element),this.rootElement.append(this.aboutPage.element),this.rootElement.append(this.gamePage.element),this.gamePage.hide(),this.rootElement.append(this.scorePage.element),this.scorePage.hide(),this.rootElement.append(this.settingsPage.element),this.settingsPage.hide(),this.header.buttonRegister.element.addEventListener("click",(()=>{this.aboutPage.popup.show()})),this.header.buttonStart.element.addEventListener("click",(()=>{window.location.hash="",window.location.hash="game"})),this.aboutPage.popup.addUserButton.element.addEventListener("click",(()=>{this.aboutPage.popup.inputs.formValidate()&&this.aboutPage.popup.hide(),this.header.headerAvatar.element.style.backgroundImage=`url('${this.aboutPage.popup.img.src}')`})),this.iDataBase.init("alexej1900-JSFE2021Q1",3),this.bestScore=[]}startGame(){return n(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=yield e.json(),s=+this.settingsPage.category,n=t[s].images.map((e=>`${t[s].category}/${e}`)).slice(0,this.settingsPage.cardsNum);this.header.buttonRegister.hide(),this.header.buttonStart.hide(),this.header.buttonStop.show(),this.aboutPage.hide(),this.scorePage.hide(),this.settingsPage.hide(),this.gamePage.renderCardsNum(this.settingsPage.cardsNum),this.gamePage.show(),this.gamePage.newGame(n),this.gamePage.winPopup.element.addEventListener("click",(()=>{this.setScoreToDataBase(),this.gamePage.winPopup.element.classList.remove("visible"),window.location.hash="score"}),{once:!0})}))}getAboutPage(){return n(this,void 0,void 0,(function*(){this.header.buttonRegister.show(),this.header.buttonStart.show(),this.header.buttonStop.hide(),this.aboutPage.show(),this.scorePage.hide(),this.settingsPage.hide(),this.gamePage.stopGame(),this.gamePage.hide()}))}getScorePage(e){return n(this,void 0,void 0,(function*(){this.header.buttonRegister.hide(),this.header.buttonStart.show(),this.header.buttonStop.hide(),this.scorePage.render(e),this.aboutPage.hide(),this.scorePage.show(),this.settingsPage.hide(),this.gamePage.hide()}))}getSettingsPage(){this.header.buttonRegister.hide(),this.header.buttonStart.show(),this.header.buttonStop.hide(),this.aboutPage.hide(),this.scorePage.hide(),this.settingsPage.show(),this.gamePage.hide()}setScoreToDataBase(){return n(this,void 0,void 0,(function*(){const e="Not registered";yield this.iDataBase.write("BestScore",{firstName:`${this.aboutPage.popup.inputs.input1.element.value||e}`,lastName:`${this.aboutPage.popup.inputs.input2.element.value||e}`,email:`${this.aboutPage.popup.inputs.input3.element.value||e}`,score:this.gamePage.score>=0?`${this.gamePage.score}`:0,avatar:`${this.aboutPage.popup.img.src}`||e})}))}getScoreFromDataBase(){return n(this,void 0,void 0,(function*(){return this.bestScore=yield this.iDataBase.readFiltered("BestScore",(e=>e.score>0)),this.getScorePage(this.bestScore),this.bestScore}))}}},7355:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AboutPageLine=void 0,s(9580);const n=s(2178),i=s(5838);class a extends n.BaseComponent{constructor(e,t,s){super("div",["about__line"]),this.aboutDescriptionBlock=new i.AboutBlock(`${e}`,`${t}`),this.element.append(this.aboutDescriptionBlock.element),this.element.append(s)}}t.AboutPageLine=a},5838:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AboutBlock=void 0,s(9281);const n=s(2178),i=s(833);class a extends n.BaseComponent{constructor(e,t){super("div",["aboutBlock"]),this.title=new i.Subtitle(`${t}`),this.count=new n.BaseComponent("div",["aboutBlockCounter"]),this.count.element.textContent=`${e}`,this.element.append(this.count.element),this.element.append(this.title.element),this.element.classList.add(`aboutBlock_${e}`)}}t.AboutBlock=a},9516:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AboutPage=void 0,s(270);const i=s(2178),a=s(833),o=s(6278),r=s(7355),l=s(3482),d=s(2454),p=n(s(5700)),u=n(s(4722));class c extends i.BaseComponent{constructor(){super("div",["about__page"]),this.title=new o.Title("How to play?"),this.subtitle=new a.Subtitle("Introduse yourself"),this.popup=new d.Popup;const e=new i.BaseComponent("img",["about__page_popupImage"]);e.element.setAttribute("src",`${p.default}`);const t=new i.BaseComponent("img",["about__page_gamePageImage"]);t.element.setAttribute("src",`${u.default}`),this.line1=new r.AboutPageLine("1","Register new player in game",e.element),this.line2=new r.AboutPageLine("2","Configure your game settings",(new l.SettingsNav).element),this.line3=new r.AboutPageLine("3","Start you new game! Remember card positions and match it before times up.",t.element),this.element.append(this.title.element),this.element.append(this.subtitle.element),this.element.append(this.line1.element),this.element.append(this.line2.element),this.element.append(this.line3.element),this.element.append(this.popup.element),this.popup.hide()}}t.AboutPage=c},1982:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BestScoreLine=void 0,s(4558);const n=s(2178),i=s(6278);class a extends n.BaseComponent{constructor(e,t,s,a,o){super("div",["bestScoreLine"]),this.firstNameData="",this.lastNameData="",this.emailData="",this.scoreData=0,this.avatarImg="";const r=new n.BaseComponent("div",["score__avatar"]);r.element.style.backgroundImage=`url('${o}')`;const l=new n.BaseComponent("p",["score__nameLine"]),d=new i.Title(`${s}`);d.element.classList.add("score__email");const p=new i.Title(`Score: ${a}`),u=new i.Title(`${e}`);u.element.classList.add("score__firstName");const c=new i.Title(`${t}`);l.element.append(u.element),l.element.append(c.element);const h=new n.BaseComponent("div",["score__dataLine"]);h.element.append(l.element),h.element.append(d.element),this.element.append(r.element),this.element.append(h.element),this.element.append(p.element)}}t.BestScoreLine=a},5159:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BestScore=void 0,s(7579);const n=s(2178),i=s(6278),a=s(1982);class o extends n.BaseComponent{constructor(e){super("div",["bestScore__page"]),this.title=new i.Title("Best players"),this.scoreField=new n.BaseComponent("div",["bestScore__block"]),this.element.append(this.title.element),this.render(e),this.element.append(this.scoreField.element)}render(e){this.scoreField.element.innerHTML="",e.forEach((e=>{const t=new a.BestScoreLine(`${e.firstName}`,`${e.lastName}`,`${e.email}`,e.score,`${e.avatar}`);this.scoreField.element.append(t.element)}))}}t.BestScore=o},6920:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,s(5879);const n=s(2178);class i extends n.BaseComponent{constructor(e){super("div",["card__container"]),this.image=e,this.isFlipped=!1,this.element.innerHTML=`\n      <div class="card">\n        <div class="card__front" style="background-image: url('./images/${e}')"></div>\n        <div class="card__back"></div>\n        <div class="card__right"></div>\n        <div class="card__wrong"></div>\n      </div>\n    `}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}}t.Card=i},9853:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0,s(976);const n=s(2178);class i extends n.BaseComponent{constructor(){super("div",["cards__field"]),this.cards=[],this.flipDelay=null}clear(){this.cards=[],this.element.innerHTML="",this.flipDelay&&clearTimeout(this.flipDelay)}addCards(e){this.cards=e,this.cards.forEach((e=>this.element.append(e.element)));const t=setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),3e4);this.flipDelay=+t}}t.CardsField=i},689:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0,s(3517),s(8387);const i=s(2178),a=s(6920),o=s(9853),r=s(4680),l=s(166),d=s(7904);class p extends i.BaseComponent{constructor(e){super("div",["game__field"]),this.isAnimation=!1,this.cardsField=new o.CardsField,this.timer=new l.Timer,this.counterRightCards=0,this.clickCounter=0,this.score=0,this.cardsNum=e,this.element.appendChild(this.timer.element),this.element.appendChild(this.cardsField.element),this.winPopup=new d.WinPopup(this.timer.data)}newGame(e){this.cardsField.clear(),this.timer.stop(),this.timer.setValue(0);const t=e.concat(e).map((e=>new a.Card(e))).sort((()=>Math.random()-.5));this.cardsField.addCards(t),this.timer.start(),this.cardsField.element.addEventListener("click",(e=>{var s;const n=null===(s=e.target.parentNode)||void 0===s?void 0:s.parentNode,i=t.find((e=>e.element===n));i&&this.cardHandler(i)}))}stopGame(){this.clickCounter=0,this.counterRightCards=0}renderCardsNum(e){this.cardsNum=e}cardHandler(e){return n(this,void 0,void 0,(function*(){if(this.clickCounter+=1,!this.isAnimation&&e.isFlipped){if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);if(this.activeCard.image!==e.image)yield r.delay(300),this.activeCard.element.children[0].children[3].classList.add("visible"),e.element.children[0].children[3].classList.add("visible"),yield r.delay(500),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()]),this.activeCard.element.children[0].children[3].classList.remove("visible"),e.element.children[0].children[3].classList.remove("visible");else if(yield r.delay(300),this.activeCard.element.children[0].children[2].classList.add("visible"),e.element.children[0].children[2].classList.add("visible"),this.counterRightCards+=1,this.counterRightCards===this.cardsNum){this.timer.stop();const e=this.clickCounter/2-(this.clickCounter/2-this.counterRightCards);this.score=100*e-10*this.timer.data,this.winPopup.render(this.timer.data),this.element.appendChild(this.winPopup.element),this.winPopup.element.classList.add("visible"),this.counterRightCards=0,this.clickCounter=0}this.activeCard=void 0,this.isAnimation=!1}}))}}t.Game=p},166:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;const n=s(2178);s(5731);class i extends n.BaseComponent{constructor(){super("div",["timer"]),this.data=0,this.timerId=null,this.delay=null,this.setValue(0)}setValue(e){this.data=e,this.refresh()}start(){this.stop(),this.setValue(0);const e=setTimeout((()=>{const e=new Date,t=setInterval((()=>{const t=new Date;this.setValue(Math.floor(Number(new Date(+t-+e))/1e3))}),1e3);this.timerId=+t}),3e4);this.delay=+e}stop(){this.delay&&clearTimeout(this.delay),this.timerId&&(clearInterval(this.timerId),this.timerId=null)}refresh(){this.element.textContent=`${this.data}`}}t.Timer=i},7904:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinPopup=void 0,s(9644);const n=s(2178),i=s(4547);class a extends n.BaseComponent{constructor(e){super("div",["winPopup__container"]),this.popup=new n.BaseComponent("div",["winPopup"]),this.time=e,this.winButton=new i.Button,this.render(this.time)}render(e){return this.popup.element.textContent=`Congratulations! You successfully found all matches on ${e} seconds.`,this.winButton=new i.Button,this.winButton.element.classList.add("winPopup__btn"),this.winButton.element.innerHTML="ok",this.popup.element.append(this.winButton.element),this.element.append(this.popup.element),this}}t.WinPopup=a},3826:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0,s(9398);const i=s(2178),a=n(s(3429)),o=n(s(6532)),r=n(s(912));class l extends i.BaseComponent{constructor(){super("div",["settings__page"]),this.cardsNum=8,this.category="0";const e=new i.BaseComponent("div",["settings__page_form"]),t=new i.BaseComponent("div",["settings__page_form"]);e.element.innerHTML='\n    <p>Please select difficult</p>\n      <div>\n        <input name="difficult" type="radio" id="8" class="settings__page_input" value="8" checked>\n        <label for="8">4X4</label>\n        <input name="difficult" type="radio" id="10" class="settings__page_input" value="10">\n        <label for="10">4X5</label>\n        <input name="difficult" type="radio" id="18" class="settings__page_input" value="18">\n        <label for="18">6X6</label>\n      </div>\n    ',t.element.innerHTML=`\n    <p>Please select cards type</p>\n      <div>\n        <input name="cards-type" type="radio" id="Mandala" class="settings__page_cardtype" value="0" checked>\n        <label class="settings__page_label" for="Mandala"><img src="${a.default}"><h4>Mandala</h4></label>\n        <input name="cards-type" type="radio" id="Animals" class="settings__page_cardtype" value="1">\n        <label class="settings__page_label" for="Animals"><img src="${o.default}"><h4>Animals</h4></label>\n        <input name="cards-type" type="radio" id="Buildings" class="settings__page_cardtype" value="2">\n        <label class="settings__page_label" for="Buildings"><img src="${r.default}"><h4>Buildings</h4></label>\n      </div>\n    `,this.element.append(e.element),this.element.append(t.element),e.element.addEventListener("input",(e=>{const t=e.target;this.cardsNum=+t.value,this.getDifficult()})),t.element.addEventListener("input",(e=>{const t=e.target;return this.category=t.value,this.category}))}getDifficult(){const e=document.querySelector(".cards__field");18===this.cardsNum&&e&&(e.style.gridTemplateColumns="repeat(6, 140px)"),10===this.cardsNum&&e&&(e.style.gridTemplateColumns="repeat(5, 140px)"),8===this.cardsNum&&e&&(e.style.gridTemplateColumns="repeat(4, 140px)")}}t.Settings=l},7385:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonRegister=void 0,s(9019);const n=s(4547);class i extends n.Button{constructor(){super(),this.element.classList.add("button_register"),this.element.innerHTML="register new player"}}t.ButtonRegister=i},6508:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStart=void 0,s(3159);const n=s(4547);class i extends n.Button{constructor(){super(),this.element.classList.add("button_start"),this.element.innerHTML="Start game"}}t.ButtonStart=i},4424:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStop=void 0,s(9087);const n=s(4547);class i extends n.Button{constructor(){super(),this.element.classList.add("button_start"),this.element.innerHTML="Stop game",this.element.addEventListener("click",(()=>{window.location.hash="about"}))}}t.ButtonStop=i},5985:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderAvatar=void 0,s(9867);const n=s(2178);class i extends n.BaseComponent{constructor(e){super("div",["header__avatar"]),this.element.style.backgroundImage=`url('${e}')`,sessionStorage.getItem("avatarField")&&(this.element.style.backgroundImage=`url('${sessionStorage.getItem("avatarField")}')`)}}t.HeaderAvatar=i},4977:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0,s(5528);const n=s(2178),i=s(9378),a=s(7385),o=s(7441),r=s(4424),l=s(6508),d=s(5985);class p extends n.BaseComponent{constructor(e){super("div",["header"]),this.logo=new i.Logo,this.navigation=new o.Navigation;const t=new n.BaseComponent("div",["button__group"]);this.buttonStop=new r.ButtonStop,this.buttonStart=new l.ButtonStart,this.buttonRegister=new a.ButtonRegister,this.headerAvatar=new d.HeaderAvatar(e),t.element.append(this.buttonRegister.element),t.element.append(this.buttonStart.element),t.element.append(this.buttonStop.element),t.element.append(this.headerAvatar.element),this.element.append(this.logo.element),this.element.append(this.navigation.element),this.element.append(t.element),this.buttonStop.hide()}}t.Header=p},9378:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=void 0,s(8231);const n=s(2178);class i extends n.BaseComponent{constructor(){super("div",["logo"]),this.element.innerHTML='\n      <div class="logo"></div>\n    '}}t.Logo=i},8838:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AboutNav=void 0;const i=s(4154),a=n(s(4718));class o extends i.NavButton{constructor(){super(a.default,"About Game","about"),this.element.setAttribute("href","#about")}}t.AboutNav=o},7441:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Navigation=void 0,s(8109);const n=s(2178),i=s(8838),a=s(5610),o=s(3482);class r extends n.BaseComponent{constructor(){super("div",["navigation"]),this.aboutNav=new i.AboutNav,this.scoreNav=new a.ScoreNav,this.settingsNav=new o.SettingsNav,this.element.insertAdjacentElement("beforeend",this.aboutNav.element),this.element.insertAdjacentElement("beforeend",this.scoreNav.element),this.element.insertAdjacentElement("beforeend",this.settingsNav.element),this.navButtons=[this.aboutNav.element,this.scoreNav.element,this.settingsNav.element],this.element.addEventListener("click",(e=>{const t=e.target;t.classList.remove("nav__button_active"),t.classList.add("nav__button_active")}))}}t.Navigation=r},5610:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreNav=void 0;const i=s(4154),a=n(s(4845));class o extends i.NavButton{constructor(){super(a.default,"Best Score","score"),this.navButton=new i.NavButton(a.default,"Best Score","score"),this.element.setAttribute("href","#score")}}t.ScoreNav=o},3482:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsNav=void 0;const i=s(4154),a=n(s(4319));class o extends i.NavButton{constructor(){super(a.default,"Game Settings","settings"),this.navButton=new i.NavButton(a.default,"Game Settings","settings"),this.element.setAttribute("href","#settings")}}t.SettingsNav=o},3852:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Inputs=void 0,s(506);const n=s(2178),i=s(9964);class a extends n.BaseComponent{constructor(){super("div",["popup__inputs"]),this.input1=new i.Input("text","First Name",["popup__input"]),this.input2=new i.Input("text","Last Name",["popup__input"]),this.input3=new i.Input("email","Email",["popup__input"]),this.element.append(this.input1.element),this.element.append(this.input2.element),this.element.append(this.input3.element),this.firstNameSpan=new n.BaseComponent("p",["popup__input_span"]),this.lastNameSpan=new n.BaseComponent("p",["popup__input_span"]),this.emailSpan=new n.BaseComponent("p",["popup__input_span"]),this.firstNameSpan.element.textContent="First Name must contain only letters and numbers, and be less than 30 characters",this.input1.element.after(this.firstNameSpan.element),this.lastNameSpan.element.textContent="Last Name must contain only letters and numbers, and be less than 30 characters",this.input2.element.after(this.lastNameSpan.element),this.emailSpan.element.textContent="Email should follow the standard rule",this.input3.element.after(this.emailSpan.element),this.input1.element.addEventListener("input",(()=>{this.firstNameValidate()})),this.input2.element.addEventListener("input",(()=>{this.lastNameValidate()})),this.input3.element.addEventListener("input",(()=>{this.emailValidate()}))}firstNameValidate(){let e=!1;return/^(\p{L})+([(\p{L})[\d])*$/u.test(this.input1.element.value)?(this.input1.element.classList.remove("popup__input_invalid"),this.input1.element.classList.add("popup__input_valid"),this.firstNameSpan.element.classList.remove("popup__input_span-alert"),e=!0,e):(this.input1.element.classList.remove("popup__input_valid"),this.input1.element.classList.add("popup__input_invalid"),this.firstNameSpan.element.classList.add("popup__input_span-alert"),e=!1,e)}lastNameValidate(){let e=!1;return/^(\p{L})+([(\p{L})[\d])*$/u.test(this.input2.element.value)?(this.input2.element.classList.remove("popup__input_invalid"),this.input2.element.classList.add("popup__input_valid"),this.lastNameSpan.element.classList.remove("popup__input_span-alert"),e=!0,e):(this.input2.element.classList.remove("popup__input_valid"),this.input2.element.classList.add("popup__input_invalid"),this.lastNameSpan.element.classList.add("popup__input_span-alert"),e=!1,e)}emailValidate(){let e=!1;return new RegExp(`${/^(([^<>()\\[\]\\.,;:\s@"]+(\.[^<>()\\[\]\\.,;:\s@"]+)*)|(".+"))/.source}${/@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.source}`).test(this.input3.element.value)?(this.input3.element.classList.remove("popup__input_invalid"),this.input3.element.classList.add("popup__input_valid"),this.emailSpan.element.classList.remove("popup__input_span-alert"),e=!0,e):(this.input3.element.classList.remove("popup__input_valid"),this.input3.element.classList.add("popup__input_invalid"),this.emailSpan.element.classList.add("popup__input_span-alert"),e=!1,e)}formValidate(){return!!(this.firstNameValidate()&&this.lastNameValidate()&&this.emailValidate())}}t.Inputs=a},2454:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0,s(506);const i=s(2178),a=s(3852),o=s(6278),r=s(4547),l=n(s(1863));class d extends i.BaseComponent{constructor(){super("div",["popup__container"]),this.popup=new i.BaseComponent("div",["popup"]),this.popupHeader=new i.BaseComponent("div",["popup__header"]),this.title=new o.Title("Register new Player"),this.popupHeader.element.append(this.title.element),this.form=new i.BaseComponent("div",["popup__form"]),this.inputs=new a.Inputs,this.form.element.append(this.inputs.element);const e=new i.BaseComponent("div",["popup__right-block"]);this.avatarInput=document.createElement("input"),this.avatarInput.type="file",this.avatarInput.id="popup__avatar",this.canvas=document.createElement("canvas"),this.img=document.createElement("img"),this.img.src=`${l.default}`,this.img.id="popup__label_img",this.canvas.id="popup__label_canvas",e.element.append(this.img),e.element.append(this.avatarInput),this.form.element.append(e.element),this.buttonsLine=new i.BaseComponent("div",["popup__buttons-line"]),this.addUserButton=new r.Button,this.addUserButton.element.classList.add("popup__addUser_btn"),this.addUserButton.element.innerHTML="add user";const t=new r.Button;t.element.classList.add("popup__cancel_btn"),t.element.innerHTML="cancel",this.buttonsLine.element.append(this.addUserButton.element),this.buttonsLine.element.append(t.element),this.popup.element.append(this.popupHeader.element),this.popup.element.append(this.form.element),this.popup.element.append(this.buttonsLine.element),this.element.append(this.popup.element),t.element.addEventListener("click",(()=>this.removeDataFromInput())),this.avatarInput.addEventListener("input",(()=>{this.clearCanvas(),this.downloadImage()})),this.element.addEventListener("click",(e=>{const t=e.target;(t.classList.contains("popup__container")||t.classList.contains("popup__cancel_btn"))&&this.hide()}));const s=this.inputs.input1.element,n=this.inputs.input2.element,d=this.inputs.input3.element,p=this.img;sessionStorage.getItem("nameField")&&(s.value=sessionStorage.getItem("nameField")),sessionStorage.getItem("lastNameField")&&(n.value=sessionStorage.getItem("lastNameField")),sessionStorage.getItem("emailField")&&(d.value=sessionStorage.getItem("emailField")),sessionStorage.getItem("avatarField")&&(p.src=sessionStorage.getItem("avatarField")),this.form.element.addEventListener("change",(()=>{sessionStorage.setItem("nameField",s.value),sessionStorage.setItem("lastNameField",n.value),sessionStorage.setItem("emailField",d.value)}))}removeDataFromInput(){this.element.querySelectorAll(".popup__input").forEach((e=>{e.value="",e.classList.remove("popup__input_valid"),e.classList.add("popup__input_invalid"),this.clearCanvas()})),this.img.src=`${l.default}`}clearCanvas(){const e=this.canvas.getContext("2d");null==e||e.clearRect(0,0,this.canvas.width,this.canvas.height)}drawImage(){const e=this.img,t=new Image,s=this.canvas;t.setAttribute("crossOrigin","anonymous"),t.src=e.src,t.onload=()=>{const e=s.getContext("2d");null==e||e.drawImage(t,0,0,t.width,t.height,0,0,200,200)}}downloadImage(){const e=new FileReader;e.onload=()=>{var t;this.img.src=e.result,sessionStorage.setItem("avatarField",this.img.src),this.canvas.width=this.img.width,this.canvas.height=this.img.height,null===(t=this.canvas.getContext("2d"))||void 0===t||t.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,180,180),this.drawImage()},null!==this.avatarInput.files&&e.readAsDataURL(this.avatarInput.files[0]),sessionStorage.setItem("avatarField",this.img.src),this.avatarInput.value=""}}t.Popup=d},2178:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}hide(){this.element.style.display="none"}show(){this.element.style.display=""}}},4547:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0,s(6977);const n=s(2178);class i extends n.BaseComponent{constructor(){super("button",["button"])}}t.Button=i},1875:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataBase=void 0,t.DataBase=class{constructor(){this.db=null}init(e,t){const s=window.indexedDB.open(e,t);s.onupgradeneeded=()=>{const e=s.result,t=e.createObjectStore("BestScore",{keyPath:"id",autoIncrement:!0});t.createIndex("firstName","firstName"),t.createIndex("lastName","lastName"),t.createIndex("email","email"),t.createIndex("score","score"),t.createIndex("avatar","avatar"),this.db=e},s.onsuccess=()=>{this.db=s.result}}write(e,t){var s;const n=null===(s=this.db)||void 0===s?void 0:s.transaction(e,"readwrite");let i;return new Promise((s=>{if(n){n.oncomplete=()=>{s(i)};const a=n.objectStore(e),o=a.add({});o&&(o.onsuccess=()=>{const e=o.result,s=Object.assign(Object.assign({},t),{id:e});i=s,null==a||a.put(s)})}}))}readAll(e){return new Promise((t=>{var s;const n=null===(s=this.db)||void 0===s?void 0:s.transaction(e,"readonly"),i=null==n?void 0:n.objectStore(e),a=null==i?void 0:i.getAll();n&&(n.oncomplete=()=>{a&&t(a.result)})}))}readFiltered(e,t){return new Promise((s=>{var n;const i=null===(n=this.db)||void 0===n?void 0:n.transaction(e,"readonly"),a=null==i?void 0:i.objectStore(e),o=null==a?void 0:a.index("score").openCursor(null,"prev"),r=[];o&&(o.onsuccess=()=>{const e=null==o?void 0:o.result;if(e){const s=e.value;t(s)&&r.length<=9&&r.push(s),e.continue()}}),i&&(i.oncomplete=()=>{s(r)})}))}}},4680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}},9964:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0,s(1695),t.Input=class{constructor(e,t,s=[]){this.element=document.createElement("input"),this.element.classList.add(...s),this.element.setAttribute("type",`${e}`),this.element.setAttribute("placeholder",`${t}`),this.element.setAttribute("minlength","1"),this.element.setAttribute("maxlength","30"),this.element.setAttribute("required","")}hide(){this.element.style.display="none"}show(){this.element.style.display=""}}},4154:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavButton=void 0,s(8227);const n=s(2178);class i extends n.BaseComponent{constructor(e,t,s){super("a",["nav__button"]),this.href=s,this.element.innerHTML=`\n        <img src='${e}' /img>\n        <p class="nav__button_p">${t}</p>\n    `}}t.NavButton=i},833:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Subtitle=void 0,s(2654);const n=s(2178);class i extends n.BaseComponent{constructor(e){super("h3",["subtitle"]),this.element.textContent=e}}t.Subtitle=i},6278:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Title=void 0,s(436);const n=s(2178);class i extends n.BaseComponent{constructor(e){super("h2",["title"]),this.element.textContent=e}}t.Title=i},1863:(e,t,s)=>{e.exports=s.p+"assets/5fdcfa39728467149e6e.svg"},4718:(e,t,s)=>{e.exports=s.p+"assets/03a2c91be5a1bf19ec1a.svg"},4722:(e,t,s)=>{e.exports=s.p+"assets/797c53637fd49b49330d.png"},912:(e,t,s)=>{e.exports=s.p+"assets/64ba68fcee857d4ff9b7.png"},3429:(e,t,s)=>{e.exports=s.p+"assets/7f3eb95deba45e36cdaf.png"},5700:(e,t,s)=>{e.exports=s.p+"assets/710faa3f475d518e1220.png"},4845:(e,t,s)=>{e.exports=s.p+"assets/0864335f526f2b9e13dd.svg"},4319:(e,t,s)=>{e.exports=s.p+"assets/61bdb6daf56f9eeae554.svg"},6532:(e,t,s)=>{e.exports=s.p+"assets/4a56bac96cf7b32ff57a.png"}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,s),a.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{s(8387);const e=s(6752),t=document.getElementById("app");if(!t)throw Error("App root element not found");const n=new e.App(t);window.onload=()=>{n.getAboutPage(),window.location.hash="about"},window.onpopstate=()=>{const e=window.location.hash.slice(1);"game"===e&&n.startGame(),"about"===e&&(n.getAboutPage(),n.header.navigation.navButtons.forEach((e=>e.classList.remove("nav__button_active"))),n.header.navigation.aboutNav.element.classList.add("nav__button_active")),"settings"===e&&(n.getSettingsPage(),n.header.navigation.navButtons.forEach((e=>e.classList.remove("nav__button_active"))),n.header.navigation.settingsNav.element.classList.add("nav__button_active")),"score"===e&&(n.getScoreFromDataBase(),n.header.navigation.navButtons.forEach((e=>e.classList.remove("nav__button_active"))),n.header.navigation.scoreNav.element.classList.add("nav__button_active"))}})()})();